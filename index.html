<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <meta name="x-ua-compatible" content="ie=edge">
        <title>Shopping Cart</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
        <style>
            #output{
                clear: both;
            }
            #checkoutdiv
            {
                display: none;
            }
        </style>
    </head>
   
    <body>
        <header class="header">
                <div class="htop"> </div>
                <div class="hbot"></div>
        </header>
        <div class="content">
            <!-- content changes on each page -->
            <div class="container">
                <div class="row">

                    <div class="col-md-3">
                        <div class="card" >
                            <div class="card-block"> 
                                <h3 class="card-title">iPhone</h3> 
                                <img src="http://via.placeholder.com/350x150" alt="place" class="img-fluid">
                                </div>
                            <div class="card-block">
                                <div class="card-text">
                                    Product information description why its the best product ever blah blah
                                    <a class="card-link productItem" href="#"  data-name="iPhone"  data-s="black" data-price="50000" data-id="1">Add to Cart</a>
                                </div>  
                                
                                </div>
                            </div>      
                        </div>

                    <div class="col-md-3">
                        <div class="card" >
                            <div class="card-block"> 
                                <h3 class="card-title">iPad</h3> 
                                <img src="http://via.placeholder.com/350x150" alt="place" class="img-fluid">
                            </div>
                            <div class="card-block">
                                <div class="card-text">
                                    Product information description why its the best product ever blah blah
                                    <a class="card-link productItem" href="#"  data-name="iPad"  data-s="white" data-price="30000" data-id="2">Add to Cart</a>
                                </div>  
                                
                            </div>
                            </div>
                        </div>

                    <div class="col-md-3">
                        <div class="card" >
                            <div class="card-block"> 
                                <h3 class="card-title">iPad</h3> 
                                <img src="http://via.placeholder.com/350x150" alt="place" class="img-fluid">
                            </div>
                            <div class="card-block">
                                <div class="card-text">
                                    Product information description why its the best product ever blah blah
                                    <a class="card-link productItem" href="#"  data-name="iPad"  data-s="white" data-price="30000" data-id="2">Add to Cart</a>
                                </div>  
                                
                            </div>
                            </div>
                        </div>

                    <div class="col-md-3">
                            <div class="card" >
                                    <div class="card-block"> 
                                        <h3 class="card-title">iPad</h3> 
                                        <img src="http://via.placeholder.com/350x150" alt="place" class="img-fluid">
                                    </div>
                                    <div class="card-block">
                                        <div class="card-text">
                                            Product information description why its the best product ever blah blah
                                            <a class="card-link productItem" href="#"  data-name="iPad"  data-s="white" data-price="30000" data-id="2">Add to Cart</a>
                                        </div>  
                                        
                                    </div>
                                </div>
                            </div>
    

                            



                </div>
            </div>
        </div>
        <footer class="footer">
            &copy;Copyright info blah blah
        </footer>



        <div id="checkoutdiv">
            <div>Subtotal <span class="items"></span> (items) : <span class="total"></span></div>
            <div>
                <span class="btn btn-success" data-toggle="modal" data-target="#cart">Open Shopping Cart</span>
                <a href="checkout.html" class="btn btn-primary">Proceed To Checkout</a>
            </div>
            </div>

        <div class="item" ><h3>iPad</h3><img src="http://via.placeholder.com/350x150" alt="place" class="img-fluid">
            <div>
                Product information description why its the best product ever blah blah
                <a href="#" class="productItem" data-name="iPad"  data-s="white" data-price="30000" data-id="2">Add to Cart</a>
            </div>
        </div>
        <div class="item" ><h3>Cable</h3> <img src="http://via.placeholder.com/350x150" alt="place" class="img-fluid">
            <div>
                Product information description why its the best product ever blah blah
                <a href="#" class="productItem" data-name="Cable"  data-s="3"  data-price="1200" data-id="3">Add to Cart</a>
            </div>
        </div>
        <div class="item" ><h3>SD Card</h3> <img src="http://via.placeholder.com/350x150" alt="place" class="img-fluid">
            <div>
                Product information description why its the best product ever blah blah
                <a href="#" class="productItem" data-name="SD Card" data-s="32GB"  data-price="3000" data-id="4">Add to Cart</a>
            </div>
        </div>
        <div class="item" ><h3>SD Card</h3> <img src="http://via.placeholder.com/350x150" alt="place" class="img-fluid">
            <div>
                Product information description why its the best product ever blah blah
                <a href="#" class="productItem" data-name="SD Card" data-s="16GB" data-price="2000" data-id="5">Add to Cart</a>
            </div>
        </div>
        <div class="item" ><h3>SD Card</h3> <img src="http://via.placeholder.com/350x150" alt="place" class="img-fluid">
            <div>
                Product information description why its the best product ever blah blah
                <a href="#" class="productItem" data-name="iPhone" data-s="4GB" data-price="1000" data-id="6">Add to Cart</a>
            </div>
        </div>

        <!--Modals-->
        <div class="modal fade" id="cart" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Shopping Cart</h4> </div>
                    <div class="modal-body">
                        <table class="table table-hover">
                            <thead class="thead-inverse"> 
                                <tr>
                                    <th>Qty</th>
                                    <th>Item Name</th>
                                    <th>Cost</th>
                                    <th class="text-right">Subtotal</th>
                                </tr>
                            </thead>
                            <tbody id="output">
                            </tbody>
                        </table>
                    </div>
                    <div class="modal-footer"> <button type="button" class="btn btn-warning" data-dismiss="modal">Continue Shopping</button> <a href="checkout.html" class="btn btn-primary">Proceed To Checkout</a></div>
                </div>        
            </div> 
        </div>

        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js" integrity="sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
        <script>
             var shopCart=[];
            $(document).ready(function()
            { 
                outputCart();
                $(".productItem").click(function (e) {
                    e.preventDefault();
                    var iteminfo=$(this.dataset)[0];
                    iteminfo.qty=1;
                    var itemInCart=false;

                    $.each(shopCart,function(index,value)
                    {
                        //console.log(index+' '+value.id);
                        if(value.id==iteminfo.id)
                        {
                            value.qty=parseInt(value.qty)+parseInt(iteminfo.qty);
                            itemInCart=true;
                        }
                    })


                    if(!itemInCart)
                    {
                        shopCart.push(iteminfo);
                    }

                    sessionStorage["sca"]=JSON.stringify(shopCart);
                    outputCart();
                  
                })


                function outputCart()
                {
                    if (sessionStorage["sca"]!=null)
                    {
                        shopCart=JSON.parse(sessionStorage["sca"].toString());
                        console.log(sessionStorage["sca"]);
                        $('#checkoutdiv').show();
                    }
                    var holderHTML='';
                    var total=0;
                    var itemsCount=0;
                    $.each(shopCart,function(index,value)
                    {
                        console.log(value);
                        var stotal=(value.qty*value.price);
                        total+=stotal;
                        itemsCount+=parseInt(value.qty);
                        holderHTML+='<tr><td>'+value.qty+'</td><td>#'+value.id+' '+value.name+'('+value.s+')</td><td>'+formatMoney(value.price)+ '</td><td class="text-right">'+formatMoney(stotal)+'</td></tr>';

                    })
                    holderHTML+='<tr><td colspan="3" class="text-right">Total</td><td class="text-right">'+formatMoney(total)+'</td></tr>'
                    $('#output').html(holderHTML);
                    $('.total').html(formatMoney(total));
                    $('.items').html(itemsCount);
                }

                function formatMoney(n) {
                    return '$'+(n/100).toFixed(2);
                }
            })
        </script>
    </body>
</html>